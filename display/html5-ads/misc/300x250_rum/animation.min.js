function gameInit(){gameHit.addEventListener("touchmove",followMouse),gameHit.addEventListener("touchend",dropToken),gameHit.addEventListener("mousemove",followMouse),gameHit.addEventListener("click",dropToken)}function IEcontrols(){gameHit.attachEvent("onmouseover",function(){alert("works")})}function followMouse(e){hasInteracted=!0,xPos=e.pageX,yPos=e.pageY,void 0==xPos&&(xPos=e.changedTouches[e.changedTouches.length-1].pageX,yPos=e.changedTouches[e.changedTouches.length-1].pageY),mouseoffsetY=75,mouseoffsetX=89,TweenLite.set(token,{x:xPos-mouseoffsetX+"px",y:yPos-mouseoffsetY+"px"})}function dropToken(){gameHit.removeEventListener("touchmove",followMouse),gameHit.removeEventListener("mousemove",followMouse),gameHit.style.visibility="hidden",TweenLite.to(".frame2",.5,{y:-207,delay:2}),xPos<=63&&TweenLite.to(token,.2,{x:7-offsetX,ease:Bounce.easeOut}),xPos>63&&xPos<=122&&TweenLite.to(token,.2,{x:67-offsetX,ease:Bounce.easeOut}),xPos>122&&xPos<=180&&TweenLite.to(token,.2,{x:123-offsetX,ease:Bounce.easeOut}),xPos>180&&xPos<=238&&TweenLite.to(token,.2,{x:181-offsetX,ease:Bounce.easeOut}),xPos>238&&TweenLite.to(token,.2,{x:239-offsetX,ease:Bounce.easeOut}),TweenLite.to(token,.5,{y:209-offsetY,ease:Bounce.easeOut,onComplete:MoveX})}function MoveX(){var e=.7;theCount++;var t=Math.floor(2*Math.random()+1);theCount<5?(updatetokenX(),tokenX<=9?(TweenLite.to(token,.8*e,{rotation:"+=40",x:"+=29",ease:Bounce.easeOut}),TweenLite.to(token,.6*e,{y:"+=45",onComplete:MoveX,ease:Bounce.easeOut,delay:.3*e})):tokenX>=209?(TweenLite.to(token,.8*e,{rotation:"-=40",x:"-=29",ease:Bounce.easeOut}),TweenLite.to(token,.6*e,{y:"+=45",onComplete:MoveX,ease:Bounce.easeOut,delay:.3*e})):1===t?(TweenLite.to(token,.8*e,{rotation:"+=40",x:"+=29",ease:Bounce.easeOut}),TweenLite.to(token,.6*e,{y:"+=45",onComplete:MoveX,ease:Bounce.easeOut,delay:.3*e})):(TweenLite.to(token,.8*e,{rotation:"-=40",x:"-=29",ease:Bounce.easeOut}),TweenLite.to(token,.6*e,{y:"+=45",onComplete:MoveX,ease:Bounce.easeOut,delay:.3*e}))):(updatetokenX(),tokenX<9?(TweenLite.to(token,.8*e,{rotation:"+=40",x:"+=28",ease:Bounce.easeOut}),endX=token._gsTransform.x+28,dropToDrink()):tokenX>=185?(TweenLite.to(token,.8*e,{rotation:"-=40",x:"-=28",ease:Bounce.easeOut}),endX=token._gsTransform.x-28,dropToDrink()):1===t?(TweenLite.to(token,.8*e,{rotation:"+=40",x:"+=28",ease:Bounce.easeOut}),endX=token._gsTransform.x+28,dropToDrink()):(TweenLite.to(token,.8*e,{rotation:"-=40",x:"-=28",ease:Bounce.easeOut}),endX=token._gsTransform.x-28,dropToDrink()))}function dropToDrink(){var e=.7;console.log(endX),endX>=-31&&endX<=-24&&TweenLite.to(token,.3*e,{y:539-offsetY,x:-37,onComplete:getRecipe,ease:Bounce.easeOut,delay:.3*e}),endX>=26&&endX<=32&&TweenLite.to(token,.3*e,{y:539-offsetY,x:31,onComplete:getRecipe,ease:Bounce.easeOut,delay:.3*e}),endX>=84&&endX<=90&&TweenLite.to(token,.3*e,{y:539-offsetY,x:90,onComplete:getRecipe,ease:Bounce.easeOut,delay:.3*e}),endX>=140&&endX<=149&&TweenLite.to(token,.3*e,{y:539-offsetY,x:155,onComplete:getRecipe,ease:Bounce.easeOut,delay:.3*e})}function updatetokenX(){tokenX=token._gsTransform.x+40}function getRecipe(){updatetokenX(),tokenX<50&&(TweenLite.to(recipe1,.5,{alpha:1,delay:1}),TweenLite.to(shadow2,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow3,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow4,.5,{alpha:.45,delay:.2})),tokenX>=50&&tokenX<119&&(TweenLite.to(shadow3,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow4,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow1,.5,{alpha:.45,delay:.2}),TweenLite.to(recipe2,.5,{alpha:1,delay:1})),tokenX>=119&&tokenX<179&&(TweenLite.to(shadow4,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow1,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow2,.5,{alpha:.45,delay:.2}),TweenLite.to(recipe3,.5,{alpha:1,delay:1})),tokenX>=179&&(TweenLite.to(shadow1,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow2,.5,{alpha:.45,delay:.2}),TweenLite.to(shadow3,.5,{alpha:.45,delay:.2}),TweenLite.to(recipe4,.5,{alpha:1,delay:1})),TweenLite.to(token,.5,{alpha:0,delay:1}),TweenLite.to(playBTN,1,{alpha:1,delay:1}),TweenLite.to(recipeBTN,1,{alpha:1,delay:1}),cta.style.visibility="visible",replayBTN.style.visibility="visible"}function replay(){TweenLite.to(".frame2",.8,{y:0,delay:.15}),gameHit.style.visibility="visible",TweenLite.to(recipeWood,.15,{alpha:0}),TweenLite.to(recipe1,.15,{alpha:0}),TweenLite.to(recipe2,.15,{alpha:0}),TweenLite.to(recipe3,.15,{alpha:0}),TweenLite.to(recipe4,.15,{alpha:0}),TweenLite.to(shadow1,.15,{alpha:0}),TweenLite.to(shadow2,.15,{alpha:0}),TweenLite.to(shadow3,.15,{alpha:0}),TweenLite.to(shadow4,.15,{alpha:0}),TweenLite.to(replayBTN,.15,{alpha:0}),TweenLite.to(recipeBTN,.15,{alpha:0}),TweenLite.to(instructions,.15,{alpha:1}),TweenLite.set(token,{alpha:1}),TweenLite.set(token,{x:0,y:-10,rotation:0}),cta.style.visibility="hidden",replayBTN.style.visibility="hidden",theCount=0,gameInit()}var maintl;!function(){maintl=new TimelineMax,maintl.add("frame0").to(".stage",.2,{autoAlpha:1},"frame0").from(".meticulously-crafted",.5,{autoAlpha:0},"frame0+=.5").from(".stamp",.5,{autoAlpha:0,scale:.8,rotation:"+=25"},"frame0+=.9").add("frame1","+=2").to(".frame2",.8,{alpha:1},"frame1").from(".logo",.5,{autoAlpha:0},"frame1+=.5").from(".instructions",.5,{autoAlpha:0,onComplete:gameInit},"frame1+=.8").seek(0)}();var xPos,yPos,mouseoffsetY,mouseoffsetX,offsetY,offsetX,tokenX,endX;offsetY=200,offsetX=66;var gameHit=document.getElementById("game-hit-area"),token=document.getElementById("token"),cta=document.getElementById("cta"),recipeBTN=document.getElementById("recipeBTN"),replayBTN=document.getElementById("replay");replayBTN.addEventListener("click",replay);var shadow1=document.getElementsByClassName("shadow1"),shadow2=document.getElementsByClassName("shadow2"),shadow3=document.getElementsByClassName("shadow3"),shadow4=document.getElementsByClassName("shadow4"),instructions=document.getElementsByClassName("instructions"),diamond=document.getElementsByClassName("diamond-in-the-rum"),playBTN=document.getElementsByClassName("play-again"),recipeWood=document.getElementsByClassName("recipe-wood"),recipe1=document.getElementsByClassName("mojito-recipe"),recipe2=document.getElementsByClassName("blue-fizz-recipe"),recipe3=document.getElementsByClassName("confusion-recipe"),recipe4=document.getElementsByClassName("old-fashioned-recipe"),hasInteracted=!1,autoPlayStart=8e3;setTimeout(function(){hasInteracted||TweenLite.to(token,.5,{y:150-offsetY,onComplete:dropToken})},autoPlayStart);var theCount=0;