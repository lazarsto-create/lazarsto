(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
  "use strict";Object.defineProperty(exports,"__esModule",{value:!0});class OutMoove{constructor(e){this.data={},this.playing=!1,this.ready=!1,this.getDataCalled=!1,this.eventEmitters={play:[],data:[]},this.request={post:(e,t,a)=>{var s=new XMLHttpRequest;s.open("POST",`${this.apiHost}${e}`,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onload=(()=>{if(200===s.status)try{a(null,JSON.parse(s.responseText))}catch(e){console.error(e),a(e)}else a(new Error(`Invalid response code ${s.status}`))}),s.onerror=(e=>{a(e)}),s.send(JSON.stringify(t))}},this.apiHost=e.apiHost,this.initDocumentEvents(),this.detectSsp(),this.setMeta(),this.hideScrollbars()}detectSsp(){void 0!==window.OutMoovePlay?this.ssp="OutMoove":void 0!==window.BroadSignObject?(this.ssp="Broadsign",window.BroadSignPlay=(()=>{this.play()})):window.addEventListener("DOMContentLoaded",e=>{this.getDataCalled?this.on("data",this.play.bind(this)):this.play()})}initDocumentEvents(){this.documentEvents={play:document.createEvent("Event")},this.documentEvents.play.initEvent("play",!0,!0)}setMeta(){const e=document.querySelector('link[rel*="icon"]'),t=e||document.createElement("link");t.setAttribute("type","image/x-icon"),t.setAttribute("rel","shortcut icon"),t.setAttribute("href","https://outmoove.com/icons/icon-48x48.png"),e||document.getElementsByTagName("head")[0].appendChild(t);const a=document.getElementsByTagName("title");if(a[0])"index"===a[0].innerText&&(a[0].innerText="OutMoove Creative");else{const e=document.createElement("title");e.innerText="OutMoove Creative",document.getElementsByTagName("head")[0].appendChild(e)}}hideScrollbars(){var e=document.createElement("style");e.innerHTML="::-webkit-scrollbar{display:none}html>::-webkit-scrollbar{width:0;display:none}::-webkit-scrollbar-thumb{display:none}::-webkit-scrollbar-track-piece{display:none}",document.getElementsByTagName("head")[0].appendChild(e)}replaceElementContents(){document.querySelectorAll("[outmoove-replace]").forEach(e=>{const t=e.getAttribute("outmoove-replace").split(".");"poi"===t[0]&&this.getPoi(t[1])?e.innerText=this.getPoi(t[1]):"meta"===t[0]&&this.getMeta(t[1])?e.innerText=this.getMeta(t[1]):"moments"===t[0]&&this.getMoment(t[1],t[2])&&(e.innerText=this.getMoment(t[1],t[2]))})}on(e,t){this.eventEmitters[e]?this.eventEmitters[e].push(t):console.error(new Error("OutMoove does not have a "+e+" event."))}getData(e,t){this.getDataCalled=!0;var a={},s=location.search.substring(1);if(s)try{a=JSON.parse('{"'+decodeURI(s).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(e){console.error(e)}var i=document.querySelector("[creative-size-id]");i&&(a.creative_size_id=i.getAttribute("creative-size-id")),a.include=e,"Broadsign"===this.ssp&&(a.screen_id=`broadsign.com:${window.BroadSignObject.player_id}`),this.request.post("/screens/meta",a,(e,a)=>{a?(this.data=a,this.ready=!0,this.emitEvent("data",this.data),this.replaceElementContents()):this.emitEvent("data",{}),t&&t(e,a)})}getPoi(e,t=""){return this.ready&&this.data.poi||console.warn("No data loaded yet, please call OutMoove.getData({ poi: true }); first."),this.data.poi&&this.data.poi[e]||t}getMoment(e,t,a=""){return this.ready&&this.data.moments||console.warn('No data loaded yet, please call OutMoove.getData({ moments: { types: ["'+e+'"] } }); first.'),this.data.moments&&this.data.moments[e]&&this.data.moments[e][t]||a}getMeta(e,t=""){return this.ready&&this.data.meta||console.warn('No data loaded yet, please call OutMoove.getData({ meta: { keys: ["'+e+'"] } }); first.'),this.data.meta&&this.data.meta[e]||t}getScreenInfo(e,t=""){return this.ready&&this.data.screen||console.warn("No screen data loaded yet, please call OutMoove.getData({ screen: true }); first."),this.data.screen&&this.data.screen[e]||t}play(){this.playing||(document.dispatchEvent(this.documentEvents.play),this.emitEvent("play",!0),this.playing=!0)}isPlaying(){return!!this.playing}isReady(){return!!this.ready}emitEvent(e,t){this.eventEmitters[e].forEach(e=>{e(t)})}}exports.default=OutMoove;
  
  },{}],2:[function(require,module,exports){
  "use strict";Object.defineProperty(exports,"__esModule",{value:!0});const index_1=require("./index");window.OutMoove=new index_1.default({apiHost:"https://api.outmoove.com/v1.0"});
  
  },{"./index":1}]},{},[2]);
  